<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment-precise-range-plugin@1.3.0/moment-precise-range.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Fonts + Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <title>Magal Touba 2025</title>
</head>
<body>
    <div id="welcome-popup" class="welcome-popup">
        <div class="welcome-content">
            <h2>Bienvenue au Magal Touba 2025</h2>
            <p>Rejoignez-nous pour c√©l√©brer cet √©v√©nement spirituel important.</p>
            <button id="welcome-close" class="btn-glow">Commencer l'exp√©rience</button>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <img src="img/2025/serigne_touba.png" alt="Serigne Touba" class="main-image pulse">
            </div>
            <h1>Magal Touba 2025 üîî</h1>
            <div class="typing">Le compte √† rebours vers l'√©v√©nement spirituel !</div>
            
            <div class="interactive-buttons">
                <button class="btn-glow" id="notify-btn"><i class="fas fa-bell"></i> M'avertir</button>
                <button class="btn-glow" id="share-btn"><i class="fas fa-share-alt"></i> Partager</button>
                <button class="btn-glow" id="info-btn"><i class="fas fa-info-circle"></i> En savoir plus</button>
            </div>
        </header>

        <div class="countdown" id="output">   
            <!-- JS va remplir √ßa -->
        </div>

        <div class="event-date">18 Safar 1446 H | 2025-08-13</div>
        
        <div class="location-badge">
            <i class="fas fa-map-marker-alt"></i> Touba, S√©n√©gal
            <span class="location-tooltip">Voir sur la carte</span>
        </div>

        <div class="content">
            <div class="section-title">
                <h2>Les Khalifes G√©n√©raux des Mourides</h2>
                <p>De 1927 √† aujourd'hui - L'h√©ritage spirituel de Serigne Touba</p>
            </div>
            
            <div class="slider-container">
                <div class="slider" id="image-slider">
                    <div class="slide active">
                        <img src="img/2025/serigne_touba.png" alt="Serigne Touba" class="gallery-image">
                        <div class="slide-caption">
                            <h3>Serigne Touba</h3>
                            <p>Le guide spirituel des mourides (1853-1927)</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/2025/serigne_mountaha.jpg" alt="Serigne Mountaha" class="gallery-image">
                        <div class="slide-caption">
                            <h3>Serigne Mountakha Bassirou Mback√©</h3>
                            <p>8√®me Khalife g√©n√©ral des mourides (depuis 2018)</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/2025/serigne_mountaha.jpg" alt="Serigne Mountaha" class="gallery-image">
                        
                        <div class="slide-caption khalife-info">
                            <h3>Cheikh Mouhammadou Moustapha Mback√©</h3>
                            <p>1er Khalife g√©n√©ral (1927-1945)</p>
                            <p>Premier successeur de Cheikh Ahmadou Bamba, il a initi√© la construction du chemin de fer reliant Diourbel √† Touba.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Cheikh Mouhamadou Fadilou Mback√©</h3>
                            <p>2√®me Khalife g√©n√©ral (1945-1968)</p>
                            <p>Il a achev√© la construction de la Grande Mosqu√©e de Touba et a renforc√© la dimension du Magal de Touba.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Cheikh Abdoul Ahad Mback√©</h3>
                            <p>3√®me Khalife g√©n√©ral (1968-1989)</p>
                            <p>Il a poursuivi le d√©veloppement de Touba, notamment dans le domaine de l'urbanisme et de l'√©ducation religieuse.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Cheikh Abdou Khadr Mback√©</h3>
                            <p>4√®me Khalife g√©n√©ral (1989-1990)</p>
                            <p>Son r√®gne a √©t√© court, mais il a continu√© l'≈ìuvre de modernisation et de d√©veloppement de la ville.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Cheikh Saliou Mback√©</h3>
                            <p>5√®me Khalife g√©n√©ral (1990-2007)</p>
                            <p>Il a men√© des projets agricoles et de r√©novation de la mosqu√©e, tout en maintenant la coh√©sion de la communaut√© mouride.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Serigne Mouhammadou Lamine Bara Mback√©</h3>
                            <p>6√®me Khalife g√©n√©ral (2007-2010)</p>
                            <p>Premier petit-fils de Serigne Touba √† assurer la charge de khalife, il a poursuivi les travaux de d√©veloppement.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-caption khalife-info">
                            <h3>Serigne Sidy Mokhtar Mback√©</h3>
                            <p>7√®me Khalife g√©n√©ral (2010-2018)</p>
                            <p>Il a renforc√© la coh√©sion sociale et poursuivi les projets de d√©veloppement, reconnu pour sa pi√©t√©.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/2025/touba.jpg" alt="Touba" class="gallery-image">
                        <div class="slide-caption">
                            <h3>Touba</h3>
                            <p>La ville sainte des mourides</p>
                        </div>
                    </div>
                </div>
                <div class="slider-controls">
                    <button id="prev-btn" class="slider-btn"><i class="fas fa-chevron-left"></i></button>
                    <div class="slider-dots" id="slider-dots"></div>
                    <button id="next-btn" class="slider-btn"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            
            <div class="description">
                <h2>Le Serviteur Privil√©gi√© du Proph√®te Mohamed PSL (1853-1927)</h2>
                <div class="expandable-text">
                    <p>
                        Dont le seul tort fut d'avoir os√© persister ouvertement dans le pr√™che pour la religion d'Allah islam.
                        Fut 32 ans durant l'objet de toutes sortes de privations et d'√©preuves tour √† tour.
                    </p>
                    <div class="hidden-text" id="more-text">
                        <p>
                            D√©port√© pendant 7 ans au Gabon, 5 ans en Mauritanie, 5 ans √† Thieyenne Djolof, 15 en r√©sidence surveill√©e √† Diourbel au S√©n√©gal.
                            Il n'a jamais cess√© jusqu'√† son rappel en Dieu le 19 juillet 1927 de d√©fendre par son enseignement et son comportement le message du proph√®te Mohammed PSL.
                        </p>
                    </div>
                    <button class="read-more-btn" id="read-more-btn">Lire la suite <i class="fas fa-angle-down"></i></button>
                </div>
            </div>
            
            <div class="interactive-section">
                <h3>Pr√©parez-vous pour le Magal</h3>
                <div class="interactive-tiles">
                    <div class="tile">
                        <i class="fas fa-book"></i>
                        <h4>Lectures recommand√©es</h4>
                        <p>D√©couvrez les √©crits essentiels</p>
                    </div>
                    <div class="tile">
                        <i class="fas fa-pray"></i>
                        <h4>Pratiques spirituelles</h4>
                        <p>Pr√©paration spirituelle</p>
                    </div>
                    <div class="tile">
                        <i class="fas fa-plane"></i>
                        <h4>Planifier votre voyage</h4>
                        <p>Informations pratiques</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <div class="newsletter">
                <h3>Restez inform√©</h3>
                <div class="newsletter-form">
                    <input type="email" placeholder="Votre email" class="email-input">
                    <button class="btn-glow">S'inscrire</button>
                </div>
            </div>
            <p>¬© 2025 Magal Touba - Tous droits r√©serv√©s</p>
        </footer>
    </div>

    <div id="info-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3>√Ä propos du Magal de Touba</h3>
            <p>Le Grand Magal de Touba comm√©more le d√©part en exil de Cheikh Ahmadou Bamba, fondateur du mouridisme.</p>
            <p>C'est l'un des plus grands rassemblements religieux au S√©n√©gal et en Afrique de l'Ouest.</p>
        </div>
    </div>

    <script>
        function updateCountdown() {
            const eventDate = moment('2025-08-13T00:00:00');
            const now = moment();
            const diff = moment.preciseDiff(now, eventDate, true);

            const intervals = [ 'months', 'days', 'hours', 'minutes', 'seconds'];
            const labels = [ 'Mois', 'Jours', 'Heures', 'Minutes', 'Secondes'];
            let html = '';

            for (let i = 0; i < intervals.length; i++) {
                let val = diff[intervals[i]];
                val = val < 10 ? '0' + val : val;
                html += `
                <div class="box">
                    <div class="value">${val}</div>
                    <div class="label">${labels[i]}</div>
                </div>
                `;
            }

            document.getElementById('output').innerHTML = html;
        }

        setInterval(updateCountdown, 1000);
        
        // Interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            // Welcome popup
            const welcomePopup = document.getElementById('welcome-popup');
            const welcomeClose = document.getElementById('welcome-close');
            
            welcomeClose.addEventListener('click', function() {
                welcomePopup.classList.add('fade-out');
                setTimeout(() => {
                    welcomePopup.style.display = 'none';
                }, 500);
            });
            
            // Info modal
            const infoBtn = document.getElementById('info-btn');
            const infoModal = document.getElementById('info-modal');
            const closeModal = document.querySelector('.close-modal');
            
            infoBtn.addEventListener('click', function() {
                infoModal.style.display = 'flex';
                setTimeout(() => {
                    infoModal.classList.add('show');
                }, 10);
            });
            
            closeModal.addEventListener('click', function() {
                infoModal.classList.remove('show');
                setTimeout(() => {
                    infoModal.style.display = 'none';
                }, 300);
            });
            
            // Read more functionality
            const readMoreBtn = document.getElementById('read-more-btn');
            const moreText = document.getElementById('more-text');
            
            readMoreBtn.addEventListener('click', function() {
                moreText.classList.toggle('show');
                if (moreText.classList.contains('show')) {
                    readMoreBtn.innerHTML = 'Voir moins <i class="fas fa-angle-up"></i>';
                } else {
                    readMoreBtn.innerHTML = 'Lire la suite <i class="fas fa-angle-down"></i>';
                }
            });
            
            // Image slider with improved functionality
            const slider = document.getElementById('image-slider');
            const slides = slider.querySelectorAll('.slide');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const dotsContainer = document.getElementById('slider-dots');
            
            let currentSlide = 0;
            let slideInterval;
            const autoPlayDelay = 5000; // 5 seconds
            
            // Create dots based on number of slides
            slides.forEach((_, index) => {
                const dot = document.createElement('span');
                dot.classList.add('dot');
                if (index === 0) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    clearInterval(slideInterval);
                    goToSlide(index);
                    startAutoPlay();
                });
                dotsContainer.appendChild(dot);
            });
            
            function goToSlide(n) {
                slides[currentSlide].classList.remove('active');
                document.querySelectorAll('.dot')[currentSlide].classList.remove('active');
                
                currentSlide = (n + slides.length) % slides.length;
                
                slides[currentSlide].classList.add('active');
                document.querySelectorAll('.dot')[currentSlide].classList.add('active');
            }
            
            function startAutoPlay() {
                slideInterval = setInterval(() => {
                    goToSlide(currentSlide + 1);
                }, autoPlayDelay);
            }
            
            // Event listeners for controls
            prevBtn.addEventListener('click', () => {
                clearInterval(slideInterval);
                goToSlide(currentSlide - 1);
                startAutoPlay();
            });
            
            nextBtn.addEventListener('click', () => {
                clearInterval(slideInterval);
                goToSlide(currentSlide + 1);
                startAutoPlay();
            });
            
            // Pause autoplay on slider hover
            slider.addEventListener('mouseenter', () => {
                clearInterval(slideInterval);
            });
            
            slider.addEventListener('mouseleave', () => {
                startAutoPlay();
            });
            
            // Touch events for mobile
            let touchStartX = 0;
            let touchEndX = 0;
            
            slider.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
                clearInterval(slideInterval);
            }, false);
            
            slider.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
                startAutoPlay();
            }, false);
            
            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    // Swipe left, go to next slide
                    goToSlide(currentSlide + 1);
                } else if (touchEndX > touchStartX + 50) {
                    // Swipe right, go to previous slide
                    goToSlide(currentSlide - 1);
                }
            }
            
            // Start autoplay when page loads
            startAutoPlay();
            
            // Notification and sharing demo buttons
            document.getElementById('notify-btn').addEventListener('click', function() {
                alert('Vous serez notifi√© avant le Magal 2025!');
            });
            
            document.getElementById('share-btn').addEventListener('click', function() {
                alert('Partagez cette page avec vos proches!');
            });
            
            // Add a small animation when clicking on khalife info
            const khalifeInfos = document.querySelectorAll('.khalife-info');
            khalifeInfos.forEach(info => {
                info.addEventListener('click', function() {
                    this.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 300);
                });
            });
        });
    </script>
</body>
</html>